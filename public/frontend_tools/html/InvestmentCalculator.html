<script type="text/javascript-lazy">
    var app = angular.module('ctw');
    app.controllerProvider.register('toolController', function ($scope) {

        var initial = {
            principal: undefined,
            years: undefined,
            interest: undefined,
            //completely optional:
            monthly: undefined,
            interval: undefined,

            result: undefined,
            error: undefined
        }
        $scope.investment = angular.copy(initial);

        $scope.calculate = function () {
            var scope = $scope.investment;
            if (validateDecimal(scope.principal) && validateDecimal(scope.years) && validateDecimal(scope.interest)) {

                scope.result = {fv: undefined, fvA: undefined};

                var interval = 1;
                if (validateDecimal(scope.interval)) {
                    interval = scope.interval;
                }

                var pv = scope.principal;
                var r = scope.interest / interval / 100;
                var n = scope.years * interval;

                var fv = pv * Math.pow(1 + r, n);
                scope.result.fv = fv.toFixed(2);

                if (validateDecimal(scope.monthly)) {
                    var p = scope.monthly * 12 / interval;

                    var fvA = p * ((Math.pow(1 + r, n) - 1) / r);
                    scope.result.fvA = fvA.toFixed(2);
                }
            } else {
                scope.error = 'Missing or invalid Input';
                return;
            }
        }
        $scope.reset = function () {
            $scope.investment = angular.copy(initial);
        }


        var validateDecimal = function (decimal) {
            decimal = parseFloat(decimal);
            return angular.isNumber(decimal) && isFinite(decimal);
        }
    });
</script>
<style>
    #form-wrapper {
        text-align: center;
    }
</style>
<sharebar></sharebar>
<h1>Investment & Savings Calculator</h1>
<div ng-controller="toolController">
    <div id="form-wrapper">
        <form class="pure-form pure-form-aligned" novalidate>
            <fieldset>
                <legend>Fill out the form and click calculate</legend>
                <div class="pure-control-group">
                    <label for="principal" class="label">Initial Amount</label>
                    <input id="principal" type="number" step="any" placeholder="amount"
                           ng-model="investment.principal"/>
                </div>
                <div class="pure-control-group">
                    <label for="years" class="label">Years</label>
                    <input id="years" type="number" step="any" placeholder="years" ng-model="investment.years"/>
                </div>
                <div class="pure-control-group">
                    <label for="interest" class="label">Interest Rate (%)</label>
                    <input id="interest" type="number" step="any" placeholder="%" ng-model="investment.interest"/>
                </div>
            </fieldset>
            <fieldset>
                <legend>Additional information (optional)</legend>
                <div class="pure-control-group">
                    <label for="monthly" class="label">Monthly Addition</label>
                    <input id="monthly" type="number" step="any" placeholder="amount (0)"
                           ng-model="investment.monthly"/>
                </div>
                <div class="pure-control-group">
                    <label for="compound" class="label">Compound Interest (times annually)</label>
                    <input id="compound" type="number" step="any" placeholder="annually (1)"
                           ng-model="investment.interval"/>
                </div>

                <div>
                    <button class="pure-button pure-button-primary" ng-click="calculate()">Calculate
                    </button>
                    <button class="pure-button" type="reset" ng-click="reset()">Clear
                    </button>
                </div>
                <alert my-context="investment"></alert>
            </fieldset>
        </form>
    </div>
    <div ng-show="investment.result !== undefined">
        <p> The Future Value of your Investment will be <b>{{(investment.result.fv*1 + (investment.result.fvA || 0)*1).toFixed(2)}}</b>.</p>
        <p ng-show="investment.result.fvA"><b>{{(investment.result.fv*1).toFixed(2)}}</b> of that comes from your initial deposit.</p>
        <p ng-show="investment.result.fvA"><b>{{(investment.result.fvA*1).toFixed(2)}}</b> of that comes from your monthly deposits.</p>
    </div>
</div>
<hr/>
<div class="pure-g">
    <div class="pure-u-1 pure-u-md-1-3 text">
        <h4>How do I use this investment calculator?</h4>
        <p>
            Enter your initial investment or deposit, the years you want to invest it and the interest rate you get and click calculate.
            The FV (Future Value) and ROI (Return on Investment) of your savings will then be calculated and presented to you.<br/>
            You can also specify how often the interest is compounded per year and how much you want to deposit monthly.<br/>
        </p>
    </div>
    <div class="pure-u-1 pure-u-md-1-3 text">
        <h4>How does this work?</h4>
        <p>
            To calculate the future value of your initial investment, <a href="http://www.financeformulas.net/Future_Value.html">this formula</a> is used.<br/>
            To calculate the future value of your monthly deposits or annuity, <a href="http://www.financeformulas.net/Future_Value_of_Annuity.html">this formula</a> is used.<br/>
            Both formulas take compound interest and length of the period into account.
        </p>
    </div>
    <div class="pure-u-1 pure-u-md-1-3 text">
        <h4>Who should use this?</h4>
        <p>
            If are looking to invest, open up a 401k/retirement savings account or want to deposit your money anywhere else where you get interest, this calculator can give you a good estimation
            on what your money will be worth in a couple of years.<br/>
            Remember that this calculator is not 100% accurate and that this site does not provide financial advice. For investment advice, please consult a financial adviser.
        </p>
    </div>
</div>
</div>


